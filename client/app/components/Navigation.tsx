'use client';
import { Fragment } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import Image from 'next/image';

import clsx from 'clsx';
import { Popover, Transition } from '@headlessui/react';
import { Bars3Icon } from '@heroicons/react/20/solid';

import { NavLink } from '@/app/components/NavLink';
import ThemeSwitcher from '@/app/components/ThemeSwitcher';

const links = [
  { label: 'Now Playing', href: '/now-playing' },
  { label: 'Popular', href: '/popular' },
  { label: 'Top Rated', href: '/top-rated' },
  { label: 'Up Coming', href: '/up-coming' },
];

export default function Navigation() {
  const pathname = `/${usePathname().split('/')[1]}`; // active paths on dynamic sub-pages

  return (
    <header className="md:mt-6">
      <nav className="mx-auto flex max-w-[700px] items-center justify-between gap-3 px-4 py-3 md:px-6">
        <Link href="/" className="shrink-0 text-primary">
          {/* <Image
            priority
            src="@/app/assets/icons/avocado.svg"
            height={32}
            width={32}
            alt="Follow us on Twitter"
          /> */}
          <svg
            width="48"
            height="49"
            viewBox="0 0 348 449"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M9 283C11.4098 244.809 23.8048 206.032 44.6269 174.265C58.4938 153.139 71.8701 131.318 80.5567 100.215C99.8636 31.1383 164.523 37.3001 186.615 94.4705C190.453 104.385 192.921 114.624 199.313 126.422C210.886 147.672 223.396 167.964 232.386 186.573C240.192 202.788 246.556 219.807 251 237.196C225.921 216.517 200.568 197.136 150.699 193.353C148.751 193.214 146.616 193.106 144.321 193.028C142.244 192.936 140.122 192.905 137.972 192.92C119.964 192.998 103.081 196.163 87.786 201.816C71.6681 207.761 57.2817 216.471 45.1319 227.25C33.112 237.968 23.2854 250.739 16.2437 264.932C13.3578 270.738 10.9336 276.776 9 283Z"
              fill="#34642A"
            />
            <mask
              id="mask0_21_150"
              mask-type="luminance"
              maskUnits="userSpaceOnUse"
              x="121"
              y="0"
              width="30"
              height="61"
            >
              <path d="M121.31 0H150.943V60.5698H121.31V0Z" fill="white" />
            </mask>
            <g mask="url(#mask0_21_150)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M140.988 1.15944C141.133 1.56138 141.653 2.19521 141.813 2.36527C142.608 3.26191 143.621 4.0658 144.62 4.73055C145.604 5.37984 146.703 6.01368 147.817 6.3847C147.991 6.44654 148.642 6.64751 149.047 6.66297C149.308 6.67843 149.366 6.58567 149.25 6.35378C149.047 5.95184 148.599 5.41076 148.483 5.25617C147.658 4.37498 146.645 3.55564 145.676 2.90634C144.692 2.25705 143.578 1.62322 142.478 1.23673C142.261 1.15944 141.523 0.943005 141.118 0.958464C140.973 0.958464 140.93 1.00484 140.988 1.15944ZM124.999 50.6449C124.059 59.7504 137.038 60.879 140.583 54.7571C142.464 51.5261 140.597 48.3105 139.526 45.2959C136.17 35.8503 142.001 17.4227 147.861 9.36836C148.454 8.56447 149.062 7.80697 149.669 7.15767C149.727 7.09583 149.8 7.03399 149.843 6.9567C150.306 6.16827 148.57 4.12763 145.965 2.39619C143.578 0.772952 141.292 -1.99321e-05 140.583 0.510142C140.424 0.649275 140.134 0.989381 139.989 1.14398C130.483 11.9037 127.358 28.909 126.895 42.7915C126.822 45.064 125.39 47.0892 124.999 50.6449Z"
                fill="#50B937"
              />
            </g>
            <mask
              id="mask1_21_150"
              mask-type="luminance"
              maskUnits="userSpaceOnUse"
              x="0"
              y="1"
              width="148"
              height="151"
            >
              <path
                d="M0.737 1.20593H147.239V151.595H0.737V1.20593Z"
                fill="white"
              />
            </mask>
            <g mask="url(#mask1_21_150)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M138.022 4.28232C128.356 9.47667 123.567 15.4594 113.901 21.8596C113.453 22.1533 113.033 22.4316 112.643 22.6944C111.268 23.4365 109.864 24.0549 108.504 24.2867C106.102 24.7505 103.266 24.4877 97.6378 23.1118C62.8971 14.4237 34.4649 40.5345 19.3156 71.6852C10.9812 88.8605 5.78677 108.092 3.61638 125.19C2.96526 130.338 2.57459 135.393 2.48777 140.325C2.44436 142.474 2.29967 144.561 1.70643 146.277C1.30129 147.482 0.765926 148.688 0.809335 148.735C0.838272 148.766 1.22894 148.333 1.73537 147.977C2.2418 147.606 4.58582 146.215 7.29158 145.859C9.12918 145.627 10.851 145.488 12.5729 145.365C31.7736 144.236 50.468 140.448 67.151 132.332C100.619 116.069 128.472 80.296 115.869 39.0659C114.654 35.0928 115.204 31.6299 116.853 28.8473C121.179 21.5041 133.883 12.8777 142.883 8.40997C143.549 8.08532 144.2 7.77613 144.808 7.49787C142.956 5.79733 140.597 4.6688 138.022 4.28232Z"
                fill="#50B937"
              />
            </g>
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M216.216 353.385C207.284 361.464 194.72 369.233 183.284 374.149C170.633 379.561 159.052 382.523 148.543 383.531C130.058 385.298 114.83 381.003 103.061 373.342C91.1624 365.589 82.8969 354.377 78.4675 342.39C76.4554 336.979 75.2394 331.489 74.7907 326.093C73.7629 313.672 76.5422 301.266 82.564 290.644C87.0224 282.735 93.2903 275.85 101.122 270.655C108.909 265.507 118.188 262.064 128.697 261.072C146.343 259.382 167.564 264.545 191.202 280.021C201.306 286.658 210.281 294.691 216.954 303.065C223.728 311.563 228.23 320.526 229.403 328.93C230.488 336.792 224.944 345.461 216.216 353.385ZM179.028 362.596C189.436 358.146 200.799 351.136 208.804 343.879C214.58 338.638 218.372 333.769 217.953 330.729C217.128 324.744 213.567 317.936 208.167 311.159C202.276 303.763 194.285 296.598 185.195 290.644C163.901 276.687 145.083 272.004 129.696 273.477C121.011 274.299 113.44 277.091 107.187 281.231C100.977 285.34 95.9972 290.845 92.4362 297.11C87.7028 305.453 85.5315 315.207 86.3276 325.023C86.6895 329.303 87.6304 333.629 89.1793 337.8C92.7402 347.43 99.4279 356.455 109.04 362.736C118.81 369.094 131.665 372.614 147.559 371.109C157.055 370.21 167.549 367.512 179.028 362.596ZM58.419 402.387C68.6821 412.172 79.8282 419.615 91.5098 424.95C103.944 430.672 117.001 434.006 130.318 435.339C144.707 436.766 159.457 435.836 174.063 432.998C189.653 429.958 205.113 424.748 219.907 417.847C221.47 417.134 223.627 416.064 226.233 414.777C229.055 413.335 231.082 412.311 232.587 411.521C234.209 410.668 236.394 409.474 238.913 408.094C240.954 406.993 243.053 405.814 245.195 404.62C246.382 403.969 248.091 403.007 252.231 400.697H252.245L252.462 400.573V400.557L252.52 400.542C259.179 396.804 265.837 393.098 273.162 389.191C275.319 388.059 277.461 386.927 279.589 385.857C281.37 384.942 283.57 383.825 286.132 382.569C288.984 381.173 291.14 380.119 292.689 379.375C294.528 378.506 296.728 377.483 299.232 376.32C302.258 374.909 305.283 373.327 308.294 371.528C311.117 369.807 313.809 367.993 316.255 366.07C318.571 364.255 320.801 362.27 322.9 360.084C324.854 358.068 326.663 355.928 328.284 353.664C329.674 351.71 330.933 349.694 331.976 347.585C332.989 345.585 333.843 343.538 334.494 341.445C335.102 339.491 335.537 337.459 335.783 335.412C336.014 333.536 336.058 331.551 335.927 329.504C335.667 325.891 334.813 322.573 333.51 319.518C332.034 316.122 330.007 313.036 327.575 310.229C324.709 306.957 321.322 304.073 317.674 301.623C313.462 298.738 308.858 296.397 304.342 294.551C300.911 293.156 297.611 291.667 294.397 290.101C291.169 288.55 287.985 286.875 284.829 285.061C281.746 283.34 278.663 281.448 275.579 279.463C272.54 277.509 269.543 275.431 266.561 273.276C262.58 270.392 258.744 267.445 254.952 264.421C251.174 261.382 247.512 258.343 243.835 255.288L240.607 252.636C237.972 250.45 237.856 250.372 237.191 249.814C234.411 247.55 231.516 245.224 228.375 242.82C225.494 240.603 222.57 238.463 219.516 236.385C216.592 234.353 213.581 232.399 210.483 230.57C207.328 228.709 204.172 226.987 200.973 225.452C196.992 223.529 192.867 221.808 188.597 220.304C184.326 218.769 180.099 217.513 175.916 216.489C171.646 215.435 167.289 214.597 162.859 213.915C158.459 213.248 153.971 212.752 149.44 212.395C142.29 211.868 135.124 211.868 128.002 212.395C120.982 212.938 114.077 214.008 107.36 215.621C100.803 217.203 94.3325 219.312 87.9778 222.01C81.8547 224.599 75.9343 227.701 70.2744 231.36C65.0053 234.725 60.0113 238.525 55.4226 242.681C50.9207 246.759 46.7228 251.256 42.8579 256.141C39.1667 260.855 35.8373 265.895 32.9712 271.213C30.1919 276.377 27.8324 281.836 25.9651 287.542C25.0966 290.132 24.3728 292.691 23.7648 295.187C23.1568 297.684 22.6357 300.289 22.2159 302.941C21.8251 305.499 21.5211 308.151 21.3185 310.818C21.0869 313.625 21 316.292 21 318.789C21.0434 326.573 21.883 334.172 23.4898 341.569C25.1255 349.167 27.5429 356.502 30.6551 363.464C33.8542 370.644 37.8204 377.514 42.4381 383.98C47.1571 390.617 52.5275 396.773 58.419 402.387Z"
              fill="#E6ED46"
            />
            <mask
              id="mask2_21_150"
              ////mask-type="luminance"
              maskUnits="userSpaceOnUse"
              x="9"
              y="199"
              width="339"
              height="250"
            >
              <path
                d="M9.10034 199.194H347.942V448.198H9.10034V199.194Z"
                fill="white"
              />
            </mask>
            <g mask="url(#mask2_21_150)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M54.6931 406.473C76.9035 427.591 102.876 438.196 129.876 440.855C160.608 443.901 192.73 436.65 222.219 422.969C226.559 420.943 230.871 418.764 235.125 416.507C239.408 414.249 243.648 411.946 247.873 409.581C250.289 408.236 252.72 406.891 255.151 405.546C262.038 401.712 268.911 397.878 275.74 394.245C279.879 392.05 284.162 389.87 288.531 387.721C292.872 385.603 297.184 383.547 301.481 381.568C307.761 378.677 313.997 375.06 319.64 370.639C324.603 366.743 329.132 362.229 332.836 357.065C335.904 352.798 338.378 348.068 339.941 343.044C341.359 338.468 342.01 333.66 341.663 328.713C341.011 319.607 337.206 311.97 331.751 305.725C324.951 297.949 315.531 292.275 306.358 288.549C299.832 285.89 293.581 282.829 287.518 279.413C281.456 275.981 275.581 272.178 269.779 267.988C262.038 262.408 254.717 256.347 247.366 250.303C245.239 248.54 243.098 246.763 240.696 244.815C234.72 239.945 228.802 235.338 222.682 231.133C216.561 226.913 210.195 223.094 203.38 219.801C194.857 215.689 186.132 212.659 177.219 210.495C168.32 208.284 159.19 206.97 149.872 206.259C135.2 205.161 120.427 206.197 106.175 209.614C92.6026 212.86 79.4935 218.286 67.3971 226.016C56.5018 233.004 46.6626 241.769 38.5598 252.034C30.8332 261.836 24.6693 272.997 20.6179 285.303C18.8382 290.652 17.507 296.124 16.6244 301.705C15.7562 307.24 15.3221 312.867 15.3366 318.54C15.409 335.329 19.0842 351.206 25.5519 365.722C32.4104 381.058 42.4231 394.848 54.6931 406.473ZM50.5838 411.467C37.6338 399.177 27.1146 384.629 19.9234 368.505C13.0649 353.108 9.2161 336.272 9.14375 318.571C9.14375 315.928 9.2161 313.346 9.37526 310.764C11.3865 280.232 25.7545 252.39 48.5436 232.154C71.3038 211.948 102.427 199.349 137.964 199.194C142.044 199.163 146.153 199.302 150.321 199.627C200.847 203.445 225.561 223.883 251.128 245.031C267.565 258.604 284.321 272.487 308.557 282.319C322.245 287.869 332.258 295.506 338.769 304.287C345.019 312.681 348.044 322.127 347.942 331.727C347.87 341.297 344.687 351.021 338.537 360.003C331.187 370.747 319.568 380.486 303.927 387.675C299.673 389.638 295.187 391.772 290.76 393.951C286.65 395.976 282.498 398.094 278.475 400.228C271.385 403.984 264.541 407.803 257.842 411.529C246.281 417.975 235.169 424.19 224.678 429.06C194.192 443.22 160.941 450.656 129.022 447.456C100.879 444.627 73.7926 433.527 50.5838 411.467Z"
                fill="#34642A"
              />
            </g>
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M181.53 368.738C201.729 360.093 225.552 342.189 223.921 330.432C221.899 315.902 207.375 298.521 188.533 286.225C122.666 243.204 77.7351 284.468 81.1858 326.195C83.8858 359.03 118.884 395.487 181.53 368.738Z"
              fill="#C0D215"
            />
          </svg>
        </Link>

        <div className="top-0 left-0 w-full to-transparent p-4">
          <h1 className="text-3xl font-bold text-green-700">
            Rotten Guacomole
          </h1>
        </div>
        {/* <ul className="hidden items-center gap-1 md:flex">
          {links.map((link) => (
            <li key={link.href}>
              <NavLink href={link.href}>{link.label}</NavLink>
            </li>
          ))}
        </ul>

        <div className="ml-auto flex h-8 w-8 items-center justify-center md:ml-0">
          <ThemeSwitcher />
        </div>

        <Popover className="relative md:hidden">
          <Popover.Button className="flex h-8 w-8 items-center justify-center rounded-lg text-secondary">
            <Bars3Icon className="h-5 w-5 cursor-pointer text-secondary transition-colors hover:text-primary" />
          </Popover.Button>
          <Transition
            as={Fragment}
            enter="transition ease-out duration-200"
            enterFrom="opacity-0 translate-y-1"
            enterTo="opacity-100 translate-y-0"
            leave="transition ease-in duration-150"
            leaveFrom="opacity-100 translate-y-0"
            leaveTo="opacity-0 translate-y-1"
          >
            <Popover.Panel className="absolute right-0 z-10 mt-2 w-40 origin-top-right overflow-auto rounded-xl bg-contrast p-2 text-base shadow-md focus:outline-none sm:text-sm">
              <div className="grid">
                {links.map((link) => (
                  <Link
                    key={link.href}
                    href={link.href}
                    className={clsx(
                      'rounded-md px-4 py-2 transition-colors hover:text-primary',
                      pathname === link.href
                        ? 'bg-secondary font-medium'
                        : 'font-normal',
                    )}
                  >
                    {link.label}
                  </Link>
                ))}
              </div>
            </Popover.Panel>
          </Transition>
        </Popover> */}
      </nav>
    </header>
  );
}
